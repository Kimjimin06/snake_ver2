--스터디카페 데이터넣기
insert into Tbl_StudyCafe (SCIdx, SCName, SCPhone, SCEmail, SCManageTime, SCLastTime) values (1111, '자바스터디', '010-1111-1111', 'javastudy@naver.com', to_date('00:00:00', 'HH24:MI:SS'), to_date('00:00:00', 'HH24:MI:SS'));

-- select * from Tbl_StudyCafe;

--개인좌석에 대한 데이터넣기
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 1, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 2, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 3, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 4, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 5, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 6, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 7, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 8, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 9, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 10, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 11, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 12, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 13, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 14, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 15, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 16, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 17, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 18, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 19, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 20, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 21, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 22, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 23, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 24, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 25, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 26, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 27, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 28, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 29, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 30, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 31, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 32, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 33, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 34, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 35, 'N');
insert into Tbl_StudyInInfo (SeatNum, SCIdx, SIINum, SeatUseState) values (c##snake.SIInfo_seq.NEXTVAL, 1111, 36, 'N');


--select * from Tbl_StudyInInfo;

--update Tbl_StudyInInfo set SeatUseState = 'Y' where SCIdx = 1111 and SIINum = 2;

--개인좌석 사용중인거 테스트하려고 몇개 바꾼것
update Tbl_StudyInInfo set SeatUseState = 'Y' where scidx = 1111 and SeatNum = '5';

--select *
--from Tbl_StudyInInfo
--order by SIINum
--offset 0 rows fetch next 6 rows only;

--select * from Tbl_StudyGInfo;
--desc Tbl_StudyGInfo;

--단체룸에 대한 데이터 넣기(SGIContent3,SGIContent4에 대한 내용은 일단 안넣었음)
insert into Tbl_StudyGInfo (SGIIdx, SCIdx, SGINum, SGIUseState, SGIContent1, SGIContent2) 
values 
(c##snake.SGInfo_seq.NEXTVAL , 1111, 1, 'N', '수성방', '스터디룸은 학습이나 작업을 위한 전용 공간으로, 개별이나 그룹으로 사용될 수 있는 공간입니다. 주로 조용하고 집중하기 좋은 환경을 제공하여 학업이나 업무에 집중할 수 있도록 돕습니다.');

insert into Tbl_StudyGInfo (SGIIdx, SCIdx, SGINum, SGIUseState, SGIContent1, SGIContent2) 
values 
(c##snake.SGInfo_seq.NEXTVAL , 1111, 2, 'N', '금성방', '스터디룸은 학습이나 작업을 위한 전용 공간으로, 개별이나 그룹으로 사용될 수 있는 공간입니다. 주로 조용하고 집중하기 좋은 환경을 제공하여 학업이나 업무에 집중할 수 있도록 돕습니다.');

insert into Tbl_StudyGInfo (SGIIdx, SCIdx, SGINum, SGIUseState, SGIContent1, SGIContent2) 
values 
(c##snake.SGInfo_seq.NEXTVAL , 1111, 3, 'N', '지구방', '스터디룸은 학습이나 작업을 위한 전용 공간으로, 개별이나 그룹으로 사용될 수 있는 공간입니다. 주로 조용하고 집중하기 좋은 환경을 제공하여 학업이나 업무에 집중할 수 있도록 돕습니다.');

insert into Tbl_StudyGInfo (SGIIdx, SCIdx, SGINum, SGIUseState, SGIContent1, SGIContent2) 
values 
(c##snake.SGInfo_seq.NEXTVAL , 1111, 4, 'N', '화성방', '스터디룸은 학습이나 작업을 위한 전용 공간으로, 개별이나 그룹으로 사용될 수 있는 공간입니다. 주로 조용하고 집중하기 좋은 환경을 제공하여 학업이나 업무에 집중할 수 있도록 돕습니다.');

--select * from Tbl_StudyGInfo;
--select * from Tbl_StudyGImg;

--단체룸 사진url 데이터 넣기
insert into Tbl_StudyGImg 
values
(c##snake.SGImg_seq.NEXTVAL, 1, '/assets/img/studyRoom/study%20room1-1.png');

insert into Tbl_StudyGImg 
values
(c##snake.SGImg_seq.NEXTVAL, 2, '/assets/img/studyRoom/study%20room2-1.png');

insert into Tbl_StudyGImg 
values
(c##snake.SGImg_seq.NEXTVAL, 3, '/assets/img/studyRoom/study%20room3-1.png');

insert into Tbl_StudyGImg 
values
(c##snake.SGImg_seq.NEXTVAL, 4, '/assets/img/studyRoom/study%20room4-1.png');

-- 잠시 테스트
insert into Tbl_StudyGImg 
values
(c##snake.SGImg_seq.NEXTVAL, 1, '/assets/img/studyRoom/study%20room1-2.png');

delete from Tbl_StudyGImg
where sgimg = '/assets/img/studyRoom/study%20room1-2.png' ;

--select a.*,b.sgimg from Tbl_StudyGInfo a, Tbl_StudyGImg b where a.sgiidx = b.sgiidx and rownum = 1 ;
--select SGImg from Tbl_StudyGImg order by SGImg;

--select rs.SGImgIdx, rs.SGIIdx, rs.SGImg
--from (select a.*,
--             row_number() over (partition by SGIIdx order by SGImg)as rn
--      from Tbl_StudyGImg a) rs
--where rn = 1; 

--select  tsgi.sgimgidx, tsgi.sgimg, tsg.* 
--from (select a.*,
--         row_number() over (partition by SGIIdx order by SGImg)as rn
--      from Tbl_StudyGImg a) tsgi
--      left outer join tbl_studyginfo tsg on tsg.sgiidx = tsgi.sgiidx
--where rn = 1;


--UPDATE Tbl_StudyInInfo SET SeatUseState = 'Y' WHERE SCIdx = 1111 AND seatnum = 
--        (select SeatNum from Tbl_StudyInInfo where SIINum = 1);

--update Tbl_StudyInInfo set SeatUseState = 'N';

-- 카테고리 데이터 넣기
insert into TBL_COMMUNITY_CATEGORY (ComCateIdx, ComCateName, ComCateUseState) values (c##snake.ComCate_seq.NEXTVAL, '공부', 'Y');
insert into TBL_COMMUNITY_CATEGORY (ComCateIdx, ComCateName, ComCateUseState) values (c##snake.ComCate_seq.NEXTVAL, '자기계발', 'Y');
insert into TBL_COMMUNITY_CATEGORY (ComCateIdx, ComCateName, ComCateUseState) values (c##snake.ComCate_seq.NEXTVAL, '취업', 'Y');
insert into TBL_COMMUNITY_CATEGORY (ComCateIdx, ComCateName, ComCateUseState) values (c##snake.ComCate_seq.NEXTVAL, '수학', 'Y');
insert into TBL_COMMUNITY_CATEGORY (ComCateIdx, ComCateName, ComCateUseState) values (c##snake.ComCate_seq.NEXTVAL, '영어', 'Y');
insert into TBL_COMMUNITY_CATEGORY (ComCateIdx, ComCateName, ComCateUseState) values (c##snake.ComCate_seq.NEXTVAL, '중국어', 'Y');
insert into TBL_COMMUNITY_CATEGORY (ComCateIdx, ComCateName, ComCateUseState) values (c##snake.ComCate_seq.NEXTVAL, '일본어', 'Y');
insert into TBL_COMMUNITY_CATEGORY (ComCateIdx, ComCateName, ComCateUseState) values (c##snake.ComCate_seq.NEXTVAL, '프랑스어', 'Y');

--select * from TBL_COMMUNITY_CATEGORY;

--회원정보 넣기
insert into TBL_MEMBER (MIdx, MemberId, MemberPw, MemberName, MemberSex, MemberPhone) values (c##snake.Mem_seq.NEXTVAL, 'id123', '123456', '백지민', 1, '01099484710');
--delete from TBL_MEMBER;

--select * from TBL_MEMBER;

--게시글 데이터 넣기
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (1, 1, 1, '이 게시글의 제목입니다.', '이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 0, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다2.', '이 게시글의 내용입니다2.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 5, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다3.', '이 게시글의 내용입니다3.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다4.', '이 게시글의 내용입니다4.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 3, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다5.', '이 게시글의 내용입니다5.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 2, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다6.', '이 게시글의 내용입니다6.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다7.', '이 게시글의 내용입니다7.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 3, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다8.', '이 게시글의 내용입니다8.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다9.', '이 게시글의 내용입니다9.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 2, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다10.', '이 게시글의 내용입니다10.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 5, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다11.', '이 게시글의 내용입니다11.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다12.', '이 게시글의 내용입니다12.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다13.', '이 게시글의 내용입니다13.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다14.', '이 게시글의 내용입니다14.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다15.', '이 게시글의 내용입니다15.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다16.', '이 게시글의 내용입니다16.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다17.', '이 게시글의 내용입니다17.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다18.', '이 게시글의 내용입니다18.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다19.', '이 게시글의 내용입니다19.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다20.', '이 게시글의 내용입니다20.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다21.', '이 게시글의 내용입니다21.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다22.', '이 게시글의 내용입니다22.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다23.', '이 게시글의 내용입니다23.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다24.', '이 게시글의 내용입니다24.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다25.', '이 게시글의 내용입니다25.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다26.', '이 게시글의 내용입니다26.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다27.', '이 게시글의 내용입니다27.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다28.', '이 게시글의 내용입니다28.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다29.', '이 게시글의 내용입니다29.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));
insert into Tbl_Community (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent, ComDelDate, ComUpDate, ComintoDate, ComToCount, ComStartDate, ComEndDate) values (c##snake.Com_seq.NEXTVAL, 1, 1, '이 게시글의 제목입니다30.', '이 게시글의 내용입니다30.이 게시글의 내용입니다.이 게시글의 내용입니다.이 게시글의 내용입니다.', to_date('99-12-31', 'yy-mm-dd'), to_date('99-12-31', 'yy-mm-dd'), 0, 4, to_date('202407071000', 'YYYYMMDDHH24MI'),to_date('202407072000', 'YYYYMMDDHH24MI'));

--delete from Tbl_Community;

--select * from Tbl_Community;

update Tbl_community set MIdx = 4 where ComIdx = 2 or ComIdx = 3;

--date세션은 이걸로 함
ALTER session set NLS_DATE_FORMAT = 'YYYY-MM-DD HH24:MI';

--컬럼값 데이터타입 바꿔주기
alter table Tbl_Community modify ComintoDate int;

--select * from TBL_COMMUNITY_CATEGORY where ComCateUseState = 'Y';

--select * from Tbl_Community;
--select ComIdx,ComCateIdx,MIdx,ComTitle,ComContent,to_char(ComRegDate, 'YYYY-MM-DD HH24:MI'),to_char(ComDelDate, 'YYYY-MM-DD HH24:MI'),to_char(ComUpDate, 'YYYY-MM-DD HH24:MI:SS'),ComintoDate,ComToCount,to_char(ComStartDate, 'YYYY-MM-DD HH24:MI'),to_char(ComEndDate, 'YYYY-MM-DD HH24:MI') from Tbl_Community;

update Tbl_Community set ComCateIdx = 2 where COMIDX = 5;
update Tbl_Community set ComCateIdx = 3 where COMIDX = 8;
update Tbl_Community set ComCateIdx = 4 where COMIDX = 10;

update Tbl_Community set ComToCount = 5 where COMIDX = 1; 
--select * from Tbl_Community;
--desc Tbl_Community;
--desc TBL_MEMBER;
--select * from TBL_MEMBER;
--select * from Tbl_TogetherStudy;
--desc Tbl_TogetherStudy;

insert into Tbl_TogetherStudy values (4, 1);
insert into Tbl_TogetherStudy values (4, 2);
insert into Tbl_TogetherStudy values (5, 2);

--select com.ComIdx,com.ComCateIdx,com.MIdx,com.ComToCount, com.ComintoDate, com.ComTitle, com.ComContent,
--               to_char(com.ComRegDate, 'YYYY-MM-DD HH24:MI'),
--               to_char(com.ComDelDate, 'YYYY-MM-DD HH24:MI'),
--                to_char(com.ComUpDate, 'YYYY-MM-DD HH24:MI'),
--                to_char(com.ComStartDate, 'YYYY-MM-DD HH24:MI'),
--                to_char(com.ComEndDate, 'YYYY-MM-DD HH24:MI'),
--                tog.MIdx
--        from Tbl_Community com, Tbl_TogetherStudy tog
--        where com.ComIdx = tog.ComIdx;

insert into tbl_studyInpare values (c##snake.SIPare_seq.nextval, 1111, '(당일권) 1시간', 1500);
insert into tbl_studyInpare values (c##snake.SIPare_seq.nextval, 1111, '(당일권) 2시간', 3000);
insert into tbl_studyInpare values (c##snake.SIPare_seq.nextval, 1111, '(당일권) 4시간', 5000);
insert into tbl_studyInpare values (c##snake.SIPare_seq.nextval, 1111, '(당일권) 6시간', 6000);
insert into tbl_studyInpare values (c##snake.SIPare_seq.nextval, 1111, '(당일권) 9시간', 8000);
insert into tbl_studyInpare values (c##snake.SIPare_seq.nextval, 1111, '(당일권) 12시간', 10000);

insert into tbl_studyInpare values (c##snake.SIPare_seq.nextval, 1111, '(정기권) 30시간', 45000);
insert into tbl_studyInpare values (c##snake.SIPare_seq.nextval, 1111, '(정기권) 50시간', 60000);
insert into tbl_studyInpare values (c##snake.SIPare_seq.nextval, 1111, '(정기권) 100시간', 110000);
insert into tbl_studyInpare values (c##snake.SIPare_seq.nextval, 1111, '(정기권) 4주이용권', 120000);
insert into tbl_studyInpare values (c##snake.SIPare_seq.nextval, 1111, '(정기권) 8주이용권', 230000);

alter table tbl_studygpare modify sgpprice number;

insert into tbl_studygpare values (c##snake.SGPARE_SEQ.nextval, 1, '1인 시간', 2000);
insert into tbl_studygpare values (c##snake.SGPARE_SEQ.nextval, 2, '1인 시간', 2000);
insert into tbl_studygpare values (c##snake.SGPARE_SEQ.nextval, 3, '1인 시간', 2000);
insert into tbl_studygpare values (c##snake.SGPARE_SEQ.nextval, 4, '1인 시간', 2000);

update tbl_studygpare set sgpprice = 1000 where sgiidx = 1;
update tbl_studygpare set sgpprice = 2000 where sgiidx = 2;
update tbl_studygpare set sgpprice = 3000 where sgiidx = 3;
update tbl_studygpare set sgpprice = 4000 where sgiidx = 4;

--select * from Tbl_StudyGPare;


alter table tbl_community add comPlace varchar(255); -- 모임 장소 
alter table tbl_studygorder add sgototal int; -- 예약 비용
    
--SELECT
--    c.ComIdx,
--    c.ComCateIdx,
--    c.MIdx,
--    c.ComToCount,
--    c.ComintoDate,
--    c.ComTitle,
--    c.ComContent,
--    to_char(c.ComRegDate, 'YYYY-MM-DD HH24:MI') AS ComRegDate,
--    to_char(c.ComDelDate, 'YYYY-MM-DD HH24:MI') AS ComDelDate,
--    to_char(c.ComUpDate, 'YYYY-MM-DD HH24:MI') AS ComUpDate,
--    to_char(c.ComStartDate, 'YYYY-MM-DD HH24:MI') AS ComStartDate,
--    to_char(c.ComEndDate, 'YYYY-MM-DD HH24:MI') AS ComEndDate,
--    COUNT(ts.MIdx) AS MemberCount
--FROM
--    Tbl_Community c
--LEFT JOIN
--    Tbl_TogetherStudy ts
--ON
--    c.ComIdx = ts.ComIdx
--WHERE
--    c.ComCateIdx = 1
--GROUP BY
--    c.ComIdx,
--    c.ComCateIdx,
--    c.MIdx,
--    c.ComToCount,
--    c.ComintoDate,
--    c.ComTitle,
--    c.ComContent,
--    c.ComRegDate,
--    c.ComDelDate,
--    c.ComUpDate,
--    c.ComStartDate,
--    c.ComEndDate
--ORDER BY
--    c.ComIdx;
    
    
--SELECT
--    c.ComIdx,
--    c.ComCateIdx,
--    c.MIdx,
--    c.ComToCount,
--    c.ComintoDate,
--    c.ComTitle,
--    c.ComContent,
--    to_char(c.ComRegDate, 'YYYY-MM-DD') AS ComRegDate,
--    to_char(c.ComDelDate, 'YYYY-MM-DD HH24:MI') AS ComDelDate,
--    to_char(c.ComUpDate, 'YYYY-MM-DD HH24:MI') AS ComUpDate,
--    to_char(c.ComStartDate, 'YYYY-MM-DD HH24:MI') AS ComStartDate,
--    to_char(c.ComEndDate, 'YYYY-MM-DD HH24:MI') AS ComEndDate,
--    c.Complace,
--    tm.MemberName AS MemberName,
--    LISTAGG(m.MemberName, ', ') WITHIN GROUP (ORDER BY m.MemberName) AS TogetherMember,
--    COUNT(ts.MIdx) AS MemberCount
--FROM
--    Tbl_community c
--    LEFT JOIN Tbl_TogetherStudy ts ON c.ComIdx = ts.ComIdx
--    LEFT JOIN Tbl_Member m ON m.MIdx = ts.MIdx
--    INNER JOIN Tbl_Member tm ON tm.MIdx = c.MIdx
--WHERE
--    c.ComIdx = 2
--GROUP BY
--    c.ComIdx,
--    c.ComCateIdx,
--    c.MIdx,
--    c.ComToCount,
--    c.ComintoDate,
--    c.ComTitle,
--    c.ComContent,
--    c.ComRegDate,
--    c.ComDelDate,
--    c.ComUpDate,
--    c.ComStartDate,
--    c.ComEndDate,
--    c.Complace,
--    tm.MemberName;
    
    
--SELECT
--            c.ComIdx,
--            c.ComCateIdx,
--            c.MIdx,
--            c.ComToCount,
--            c.ComintoDate,
--            c.ComTitle,
--            c.ComContent,
--            c.Complace,
--            to_char(c.ComRegDate, 'YYYY-MM-DD') AS ComRegDate,
--            to_char(c.ComDelDate, 'YYYY-MM-DD HH24:MI') AS ComDelDate,
--            to_char(c.ComUpDate, 'YYYY-MM-DD HH24:MI') AS ComUpDate,
--            to_char(c.ComStartDate, 'YYYY-MM-DD HH24:MI') AS ComStartDate,
--            to_char(c.ComEndDate, 'YYYY-MM-DD HH24:MI') AS ComEndDate,
--            COUNT(ts.MIdx) AS MemberCount,
--            LISTAGG(m.MemberName, ', ') WITHIN GROUP (ORDER BY m.MemberId) AS TogetherMemberName,
--            LISTAGG(m.MemberId, ', ') WITHIN GROUP (ORDER BY m.MemberId) AS TogetherMemberId,
--            tm.MemberId AS MemberId,
--            tm.MemberName AS MemberName,
--            c.ComZipcode,
--            c.ComAddress
--        FROM
--            Tbl_community c
--            LEFT JOIN Tbl_TogetherStudy ts ON c.ComIdx = ts.ComIdx
--            LEFT JOIN Tbl_Member m ON m.MIdx = ts.MIdx
--            INNER JOIN Tbl_Member tm ON tm.MIdx = c.MIdx
--        WHERE
--            c.ComIdx = 1
--        GROUP BY
--            c.ComIdx,
--            c.ComCateIdx,
--            c.MIdx,
--            c.ComToCount,
--            c.ComintoDate,
--            c.ComTitle,
--            c.ComContent,
--            c.ComRegDate,
--            c.ComDelDate,
--            c.ComUpDate,
--            c.ComStartDate,
--            c.ComEndDate,
--            c.Complace,
--            tm.MemberId,
--            tm.MemberName,
--            c.ComZipcode,
--            c.ComAddress;
            

select * from Tbl_member;

update tbl_member set memberpw = 123 ;

select * from Tbl_TogetherStudy;
select * from tbl_community;
select * from tbl_studyginfo;
insert into Tbl_TogetherStudy values ((select MIdx from Tbl_member where MemberId = 'admin'), 2);

delete from Tbl_TogetherStudy where midx = 1 or midx = 6;

--세션 바꾼것 
--ALTER SESSION SET NLS_DATE_FORMAT =  'YYYY-MM-DD HH24:MI:SS';

update tbl_community 
set 
    ComTitle = '2번 게시물의 제목입니다.',
    ComCateIdx = 1 ,
    ComContent = '2번게시물의 내용입니다.',
    ComToCount = 5,
    ComStartDate = to_date('2024-07-07 10:00', 'YYYY-MM-DD HH24:MI'), 
    ComEndDate = to_date('2024-07-07 20:00', 'YYYY-MM-DD HH24:MI'),
    comPlace = '온라인',
    ComZipcode = '',
    ComAddress = ''
    where ComIdx = 2 ;
    
--teamdetail페이지에서 사용할 select문 아직완성안됨
--select sgi.*, sgp.*,
--        LISTAGG(sgimg.SGImg, ', ') WITHIN GROUP (ORDER BY sgimg.SGImg) AS IMGURL
--from Tbl_studyGinfo sgi
--    LEFT JOIN Tbl_StudyGPare sgp ON sgi.SGIIdx = sgp.SGIIdx
--    INNER JOIN Tbl_studyGImg sgimg ON sgi.SGIIdx = sgimg.SGIIdx
--where sgi.SGIIdx = 1
--group by sgi.SGIIdx, sgi.SCIdx, sgi.SGINum, sgi.SGIUseState, sgi.SGIContent1, sgi.SGIContent2, sgi.SGIContent3, sgi.SGIContent3,
--         sgp.SGPIdx, sgp.SGIIdx, sgp.SGPName, sgp.SGPPrice ;
         
    
select * from Tbl_studyGOrder;

ALTER TABLE tbl_community ADD ComZipcode VARCHAR(255);
ALTER TABLE tbl_community ADD ComAddress VARCHAR(255);


CREATE TABLE Tbl_StudyReviewImg (
	SRIImgIdx int NOT NULL,
    SRIdx int NOT NULL,
    SRIImg varchar(255) Null
);

ALTER TABLE Tbl_StudyReviewImg ADD CONSTRAINT PK_TBL_STUDYREVIEWIMG PRIMARY KEY (
	SRIImgIdx
);

ALTER TABLE Tbl_StudyReviewImg ADD CONSTRAINT FK_Tbl_StudyReview_TO_Tbl_StudyReviewImg_1 FOREIGN KEY (
	SRIdx
)
REFERENCES Tbl_StudyReview (
	SRIdx
);

CREATE SEQUENCE c##snake.SRIImg_seq
   INCREMENT BY 1
   START WITH 1
   MINVALUE 1
   MAXVALUE 9999
   NOCYCLE
   NOCACHE
   NOORDER;
   
   
--delete from Tbl_TogetherStudy where ComIdx = ? and Midx in (select Midx from Tbl_Member where MemberId = taerang ) 
    
delete Tbl_TogetherStudy
        where ComIdx = 2
        and Midx in (select Midx from Tbl_Member where MemberId = 'taerang' or MemberId = 'kimji' );
        

insert into Tbl_TogetherStudy values (6, 2);
insert into Tbl_TogetherStudy values (5, 2);
insert into Tbl_TogetherStudy values (1, 1);

--ALTER TABLE Tbl_TogetherStudy
--ADD CONSTRAINT Tbl_TogetherStudy_delete
--  FOREIGN KEY (CHILD_테이블의_FK값)
--  REFERENCES MOTHER_테이블명(MOTHER_테이블의_PK)
--  ON DELETE CASCADE;

select * from tbl_community;
select * from tbl_togetherstudy;

delete tbl_community where comidx = 30;

insert into tbl_community
            (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent,
              ComDelDate, ComUpDate, ComintoDate, ComRegDate,
             ComToCount, ComStartDate, ComEndDate, Complace
             )
        values
            (c##snake.ComCate_seq.NEXTVAL, 1, (select Midx from Tbl_Member where MemberId = 'id123'), '123',
             '123',  to_date('9999-12-31', 'YYYYMMDD'), to_date('9999-12-31', 'YYYYMMDD'), 0, SYSDATE, 0,
             to_date('2024-07-15 21:00', 'YYYY-MM-DD HH24:MI'), to_date('2024-07-21 21:00', 'YYYY-MM-DD HH24:MI'), '온라인'
             
            );
            
            
insert into tbl_community
    (ComIdx, ComCateIdx, MIdx, ComTitle, ComContent,
      ComDelDate, ComUpDate, ComintoDate, ComRegDate,
     ComToCount, ComStartDate, ComEndDate, Complace
     )
values
    (c##snake.ComIdx_seq.NEXTVAL, 1, (select Midx from Tbl_Member where MemberId = 'id123'), '123',
     '123',  to_date('9999-12-31', 'YYYY-MM-DD'), to_date('9999-12-31', 'YYYY-MM-DD'), 0, SYSDATE, 0,
     to_date('2024-07-15 21:00', 'YYYY-MM-DD HH24:MI'), to_date('2024-07-21 21:00', 'YYYY-MM-DD HH24:MI'), '온라인'
     
    );


CREATE TABLE Tbl_StudyReviewImg (
    SRIImgIdx int NOT NULL,
    SRIdx int NOT NULL,
    SRIImgSrc varchar(255) not null,
    SRIImgName varchar(255) not null
);

ALTER TABLE Tbl_StudyReviewImg ADD CONSTRAINT PK_TBL_STUDYREVIEWIMG PRIMARY KEY (
   SRIImgIdx
);

ALTER TABLE Tbl_StudyReviewImg ADD CONSTRAINT FK_Tbl_StudyReview_TO_Tbl_StudyReviewImg_1 FOREIGN KEY (
   SRIdx
)
REFERENCES Tbl_StudyReview (
   SRIdx
);

CREATE SEQUENCE c##snake.SRIImg_seq
   INCREMENT BY 1
   START WITH 1
   MINVALUE 1
   MAXVALUE 9999
   NOCYCLE
   NOCACHE
   NOORDER;
   

alter table tbl_memberininfo modify seatnum null;

alter table tbl_studyininfo add SeatStartTime date null;
alter table tbl_studyininfo add SEatEndTime date null;

alter table tbl_studygorder modify sgonum varchar(255);

alter table tbl_studygorder add sgototal int;

select * from Tbl_StudyReview;

alter table tbl_studyreview add srtitle varchar(255);


-- 회원 알림 테이블 만들기
CREATE TABLE Tbl_Member_Alarm (
	MAIdx	int		NOT NULL,
    MIdx    int     NOT NULL,
	MATitle varchar(255)		NULL,
    MAContent varchar(255)		NULL,
	MADate	date		NULL
);

ALTER TABLE Tbl_Member_Alarm ADD CONSTRAINT PK_TBL_MEMBER_ALARM PRIMARY KEY (
	MAIdx
);

ALTER TABLE Tbl_Member_Alarm ADD CONSTRAINT FK_Tbl_Member_TO_Tbl_Member_Alarm_1 FOREIGN KEY (
	MIdx
)
REFERENCES Tbl_Member (
	MIdx
);

CREATE SEQUENCE c##snake.MAIdx_seq
   INCREMENT BY 1
   START WITH 1
   MINVALUE 1
   MAXVALUE 9999
   NOCYCLE
   NOCACHE
   NOORDER;


-- 회원 알림 테이블에 테스트하기 위해 데이터 넣은 것
select * from Tbl_Member_Alarm;
select * from tbl_member;
select * from Tbl_member_alarm where midx = (select Midx from tbl_member where memberid = 'id123');

insert into Tbl_Member_Alarm values (c##snake.MAIdx_seq.NEXTVAL, 1, '알림', '테스트 알림 내용입니다.', sysdate);


-- 회원 주소 테이블 만들기
CREATE TABLE Tbl_MemberAddress (
	MIdx	int		NOT NULL,
	MAaddress varchar(255)		NOT NULL,
    MAlatitude	number		NOT NULL,
    MAlongitude	number		NOT NULL
);

ALTER TABLE Tbl_MemberAddress ADD CONSTRAINT PK_TBL_MEMBERADDRESS PRIMARY KEY (
	MIdx
);

ALTER TABLE Tbl_MemberAddress ADD CONSTRAINT FK_Tbl_Member_TO_Tbl_MemberAddress_1 FOREIGN KEY (
	MIdx
)
REFERENCES Tbl_Member (
	MIdx
);

-- test용 댓글데이터 넣는 sql
insert into tbl_community_comment values (1,1,2,1,1,1,'test댓글 내용', '9999-12-31','9999-12-31', '9999-12-31');
insert into tbl_community_comment values (2,4,2,1,1,1,'test댓글 내용22222', '9999-12-31','9999-12-31', '9999-12-31');

-- post페이지에서 content가져올 때 댓글에 대한 정보도 같이 가져올 수 있게 변경한 sql
--SELECT
--    c.ComIdx,
--    c.ComCateIdx,
--    c.MIdx,
--    c.ComToCount,
--    c.ComintoDate,
--    c.ComTitle,
--    c.ComContent,
--    c.Complace,
--    to_char(c.ComRegDate, 'YYYY-MM-DD') AS ComRegDate,
--    to_char(c.ComDelDate, 'YYYY-MM-DD HH24:MI') AS ComDelDate,
--    to_char(c.ComUpDate, 'YYYY-MM-DD HH24:MI') AS ComUpDate,
--    to_char(c.ComStartDate, 'YYYY-MM-DD HH24:MI') AS ComStartDate,
--    to_char(c.ComEndDate, 'YYYY-MM-DD HH24:MI') AS ComEndDate,
--    COUNT(ts.MIdx) AS MemberCount,
--    LISTAGG(m.MemberName, ', ') WITHIN GROUP (ORDER BY m.MemberId) AS TogetherMemberName,
--    LISTAGG(m.MemberId, ', ') WITHIN GROUP (ORDER BY m.MemberId) AS TogetherMemberId,
--    tm.MemberId AS MemberId,
--    tm.MemberName AS MemberName,
--    c.ComZipcode,
--    c.ComAddress,
--    tcc.Midx,
--    tcc.CCContent,
--    to_char(tcc.CCRegDate, 'YYYY-MM-DD HH24:MI') AS CCRegDate,
--    to_char(tcc.CCUpDate, 'YYYY-MM-DD HH24:MI') AS CCUpDate
--FROM
--    Tbl_community c
--    LEFT JOIN Tbl_TogetherStudy ts ON c.ComIdx = ts.ComIdx
--    LEFT JOIN Tbl_Member m ON m.MIdx = ts.MIdx
--    INNER JOIN Tbl_Member tm ON tm.MIdx = c.MIdx
--    LEFT JOIN Tbl_Community_Comment tcc ON ts.ComIdx = tcc.Comidx
--WHERE
--    c.ComIdx = 2
--GROUP BY
--    c.ComIdx,
--    c.ComCateIdx,
--    c.MIdx,
--    c.ComToCount,
--    c.ComintoDate,
--    c.ComTitle,
--    c.ComContent,
--    c.ComRegDate,
--    c.ComDelDate,
--    c.ComUpDate,
--    c.ComStartDate,
--    c.ComEndDate,
--    c.Complace,
--    tm.MemberId,
--    tm.MemberName,
--    c.ComZipcode,
--    c.ComAddress,
--    tcc.Midx,
--    tcc.CCContent,
--    tcc.CCRegDate,
--    tcc.CCUpDate;

-- 현재 post에 해당하는 comment정보 가져오는 sql
select tcc.CCIdx,
       tcc.ComIdx,
       tcc.CCRefNum,
       tcc.CCNum,
       tcc.CCGroupNum,
       tcc.CCContent, 
       tm.MemberName, 
       to_char(tcc.CCRegDate, 'YYYY-MM-DD HH24:MI') AS CCRegDate,
       to_char(tcc.CCUpDate, 'YYYY-MM-DD HH24:MI') AS CCUpDate,
       to_char(tcc.CCDelDate, 'YYYY-MM-DD HH24:MI') AS CCDelDate
from Tbl_Community_Comment tcc 
     INNER JOIN Tbl_Member tm ON tcc.Midx = tm.Midx
where tcc.Comidx = 2;



--
select * from Tbl_Member;
select * from tbl_community_comment;
desc Tbl_MemberAddress;

rollback;

commit;